<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  metal:use-macro="context/@@groupserver_layout/page">
  <head>
    <title metal:fill-slot="title">
      Respond to Membership Requests:
      <span tal:replace="view/groupInfo/name">A User</span>:
      <span tal:replace="view/siteInfo/name">A Site</span>
    </title>
  </head>
  <body>
    <!-- tal:block content="structure provider:groupserver.FormStatusMessage"
      define="errors view/errors; status view/status; widgets view/widgets"
      metal:fill-slot="messages">&#160;</tal:block-->
    <div metal:fill-slot="messages"
      tal:define="result view/process_form;
        isError python:result.get('error', False);
        c python:(isError and 'message-error') or 'message-result';"
      tal:condition="python:result and result.has_key('message')"
      tal:attributes="class string:${c} ui-state-highlight ui-corner-all"
      tal:content="structure result/message"/>
    <div metal:fill-slot="body" id="gs-group-member-request-respond"
      tal:define="ctx view/context;
        md python:modules['Products.XWFCore.XWFUtils'].munge_date;">
      <h1>Respond to Membership Requests</h1>
      <form id="action" 
        tal:condition="view/requests"
        enctype="multipart/form-data" method="post" action="." 
        tal:attributes="action request/URL">
        <p tal:condition="python:len(view.requests)>1">
          To respond to the requests select <samp>Accept</samp> or
          <samp>Decline</samp> for each person below and click the
          <samp class="button">Respond</samp> button.
        </p>
        <p tal:condition="python:len(view.requests)==1">
          To respond to the request select <samp>Accept</samp>
          or <samp>Decline</samp> and click the <samp
          class="button">Respond</samp> button.
        </p>
        <div class="user-request" 
          tal:repeat="request view/requests">
          <h2 class="fn" 
            tal:attributes="id string:user-${request/userInfo/id}"
            tal:content="request/userInfo/name">
            The Applicant
          </h2>
          <p>
            <a class="fn" url="#"
              tal:attributes="href request/userInfo/url"
              tal:content="request/userInfo/name">The applicant</a>
              wrote the following message when applying to join
              <span class="group"
                tal:content="view/groupInfo/name">this group</span>.
          </p>
          <blockquote>
            <p>
              <strong>From:</strong>
              <a tal:attributes="href string:mailto:${request/email}"
                href="#"><code 
                    tal:content="request/email"
                    class="email">email</code></a>
            </p>
            <pre tal:content="request/message">
              The message
            </pre>
          </blockquote>
          <fieldset tal:define="uid request/userInfo/id">
            <div class="radioItem">
              <input type="radio" checked="" 
                value="accept" class="radioType"
                name="foo" id="foo-accept" 
                tal:attributes="name string:${uid}-respond;
                  id string:${uid}-accept;
                  value string:${uid}-accept"/> 
              <label class="radioLabel" id="foo-accept-label"
                for="foo-accept" 
                tal:attributes="id string:${uid}-accept-label;
                  for string:${uid}-accept">Accept the request to join
                  <span class="group"
                    tal:content="view/groupInfo/name">this group</span></label>
            </div>
            <div class="radioItem">
              <input type="radio" class="radioType"
                name="foo" id="foo-decline"
                tal:attributes="name string:${uid}-respond;
                  id string:${uid}-decline;
                  value string:${uid}-decline"/> 
              <label class="radioLabel" id="foo-decline-label"
                for="foo-decline" 
                tal:attributes="id string:${uid}-decline-label;
                  for string:${uid}-decline">Decline the request to join
                  <span class="group"
                    tal:content="view/groupInfo/name">this group</span></label>
            </div>
          </fieldset>
        </div><!--user-request-->
        <input type="hidden" class="hidden" name="submitted" value=""/>
        <input class="button" type="submit" value="Respond" 
          id="respond-button" name="respond-button"/>
      </form><!--current-->
      <p tal:condition="not:view/requests">
        There are no requests to join
        <a class="group"
          tal:attributes="href view/groupInfo/relativeURL"
          tal:content="view/groupInfo/name">this group</a>.
      </p>
    </div><!--gs-group-member-request-respond-->
  </body>
</html>

